<!-- 참여 중인 모임 -->
<!-- 모임리스트 비어있을 때 -->
<div th:if="${ #lists.isEmpty(myclubList) }" class="empty">
    <span th:switch="${type}">
        <span th:case="'APPROVED'">참여 중인 모임이 없습니다</span>
        <span th:case="'HOST'">리더인 모임이 없습니다</span>
        <span th:case="'PENDING'">신청 중인 모임이 없습니다</span>
    </span>
</div>
<!-- 모임리스트 비어있지 않을 때 -->
<div th:unless="${ #lists.isEmpty(myclubList)}">
    <div th:if="${type == 'APPROVED'}">
        <div class="tab-content active" id="participating">
            <div th:each="club : ${myclubList}" class="club-card" th:attr="data-club-no=${club.no}" style="cursor: pointer;">
                <div class="club-info">
                    <div class="club-icon">
                        <span class="material-symbols-outlined">group</span>
                    </div>
                    <div class="club-details">
                        <div class="club-title-row">
                            <h3 class="club-title" th:text="${club.title}">모임명</h3>
                        </div>
                        <p class="club-category" th:text="${club.category != null ? club.category.name : '카테고리 없음'}">카테고리명</p>
                        <p class="club-members" th:text="|멤버 ${club.currentMembers}/${club.maxMembers}명|">가입 멤버수</p>
                    </div>
                </div>
                <div class="club-actions">
                    <button class="btn-leave" th:attr="data-clubno=${club.no}" onclick="clubOpenModal(this);">
                        <span class="material-symbols-outlined">logout</span>
                        <span>탈퇴</span>
                    </button>
                </div>
            </div>
        </div>
    </div>

    <!-- 리더인 모임 -->
    <div th:if="${type == 'HOST'}">
        <div class="tab-content" id="leader">
            <div th:each="club : ${myclubList}" class="club-card-wrapper">
                <div class="club-card" th:attr="data-club-no=${club.no}" style="cursor: pointer;">
                    <div class="club-info">
                        <div class="club-icon">
                            <span class="material-symbols-outlined">group</span>
                        </div>
                        <div class="club-details">
                            <div class="club-title-row">
                                <h3 class="club-title" th:text="${club.title}">모임명</h3>
                                <span class="material-symbols-outlined leader-crown">chess_queen</span>
                            </div>
                            <p class="club-category" th:text="${club.category != null ? club.category.name : '카테고리 없음'}">카테고리명</p>
                            <p class="club-members" th:text="|멤버 ${club.currentMembers}/${club.maxMembers}명|">가입 멤버수</p>
                        </div>
                    </div>
                    <div class="club-actions leader-actions">
                        <button class="btn-leader-manage" th:attr="data-club-no=${club.no}" onclick="memberList()">
                            <span>멤버 관리</span>
                            <span class="material-symbols-outlined">expand_more</span>
                        </button>
                        <button class="btn-leader-delete" onclick="event.stopPropagation();">
                            <span class="material-symbols-outlined">logout</span>
                            <span>모임 삭제</span>
                        </button>
                    </div>
                </div>
                
                <!-- 멤버 관리 영역 (토글) -->
                <!-- id="memberManagement"
                     -->
                <div class="member-management-area"  id="|memberManagement-${club.no}|" style="display: none;">
                    <!-- 가입 요청 섹션 -->
                    <div class="member-section">
                        <div class="member-section-header">
                            <span class="material-symbols-outlined section-icon pending-icon">schedule</span>
                            <h4 class="section-title">가입 요청 (<span text="${pendingList.size()}">0</span>)</h4>
                        </div>
                        <div class="member-list" each="pending : ${pendingList}">
                            <div if="${#lists.isEmpty(pending)}">가입 요청 없음</div>
                            <div class="member-item pending">
                                <div class="member-info">
                                    <p class="member-name" text="${m.user.username}">이름</p>
                                    <!-- 신청일 어ㅓ쩜...? -->
                                    <p class="member-date" text="|신청일: ${#temporals.format(m.joinedAt, 'yyyy-MM-dd')}|">신청일: yyyy-mm-dd</p>
                                </div>
                                <div class="member-actions">
                                    <button class="btn-approve" attr="data-member-no=${m.no},data-club-no=${clubNo}">
                                        <span class="material-symbols-outlined">check</span>
                                        <span>승인</span>
                                    </button>
                                    <button class="btn-reject" attr="data-member-no=${m.no},data-club-no=${clubNo}">
                                        <span class="material-symbols-outlined">close</span>
                                        <span>거부</span>
                                    </button>
                                </div>
                            </div>
                            <!-- <div class="member-item pending">
                                <div class="member-info">
                                    <p class="member-name">최지혜</p>
                                    <p class="member-date">신청일: 2025-01-27</p>
                                </div>
                                <div class="member-actions">
                                    <button class="btn-approve">
                                        <span class="material-symbols-outlined">check</span>
                                        <span>승인</span>
                                    </button>
                                    <button class="btn-reject">
                                        <span class="material-symbols-outlined">close</span>
                                        <span>거부</span>
                                    </button>
                                </div>
                            </div> -->
                        </div>
                    </div>

                    <!-- 승인된 멤버 섹션 -->
                    <div class="member-section">
                        <div class="member-section-header">
                            <!-- <h4 class="section-title">승인된 멤버 (<span text="${#lists.size(approvedList)}">0</span>)</h4> -->
                        </div>
                        <div class="member-list">
                            <div if="${#lists.isEmpty(approvedList)}">멤버 없음</div>
                            <div each="m : ${approvedList}" class="member-item approved">
                                <div class="member-info">
                                    <p class="member-name" text="${m.user.username}">이름</p>
                                    <p class="member-date" text="|가입일: ${#temporals.format(m.joinedAt, 'yyyy-MM-dd')}|">가입일: yyyy-mm-dd</p>
                                </div>
                                <button class="btn-remove-member" attr="data-member-no=${m.no},data-club-no=${clubNo}">추방하기</button>
                            </div>
                            <!-- <div class="member-item approved">
                                <div class="member-info">
                                    <p class="member-name" th:text="${user.username}">이영희</p>
                                    <p class="member-date" th:text="$clubmember.joinedAt">가입일: 2025-01-20</p>
                                </div>
                                <button class="btn-remove-member">추방하기</button>
                            </div> -->
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </div>

    <!-- 신청 중인 모임 -->
    <div th:if="${type == 'PENDING'}">
        <div class="tab-content" id="pending">
            <div th:each="club : ${myclubList}" class="club-card" th:attr="data-club-no=${club.no}" style="cursor: pointer;">
                <div class="club-info">
                    <div class="club-icon gradient-orange">
                        <span class="material-symbols-outlined">restaurant</span>
                    </div>
                    <div class="club-details">
                        <div class="club-title-row">
                            <h3 class="club-title" th:text="${club.title}">모임명</h3>
                            <span class="status-badge pending">승인 대기 중</span>
                        </div>
                        <p class="club-category" th:text="${club.category != null ? club.category.name : '카테고리 없음'}">카테고리명</p>
                        <p class="club-members" th:text="|멤버 ${club.currentMembers}/${club.maxMembers}명|">가입 멤버수</p>
                    </div>
                </div>
                <div class="club-actions">
                    <button class="btn-cancel-request" th:attr="data-clubno=${club.no}" onclick="pendingOpenModal(this);">
                        <span class="material-symbols-outlined">close</span>
                        신청 취소
                    </button>
                </div>
            </div>
        </div>
    </div>
</div>